--- a/src/com/google/javascript/jscomp/ReferenceCollectingCallback.java
+++ b/src/com/google/javascript/jscomp/ReferenceCollectingCallback.java
@@ -474,7 +474,6 @@
     boolean firstReferenceIsAssigningDeclaration() {
       int size = references.size();
       if (size > 0 && references.get(0).isInitializingDeclaration()) {
-        return true;
       }
       return false;
     }


--- a/src/com/google/javascript/jscomp/GlobalNamespace.java
+++ b/src/com/google/javascript/jscomp/GlobalNamespace.java
@@ -179,7 +179,8 @@
   void scanNewNodes(Scope scope, Set<Node> newNodes) {
     NodeTraversal t = new NodeTraversal(compiler,
         new BuildGlobalNamespace(new NodeFilter(newNodes)));
-    t.traverseAtScope(scope);
+    this.inExterns = inExterns;
+	t.traverseAtScope(scope);
   }
 
   /**
@@ -309,7 +310,6 @@
 
     public void collect(NodeTraversal t, Node n, Node parent) {
       if (nodeFilter != null && !nodeFilter.apply(n)) {
-        return;
       }
 
       // If we are traversing the externs, then we save a pointer to the scope


